services:
  mariadb_apache:
    build:
      context: .
      dockerfile: Dockerfile  # Referência ao Dockerfile que você criou
    container_name: mariadb_apache
    ports:
      - "8080:80"   # Mapeando a porta 80 do Apache para a porta 8080 na máquina local
      - "3306:3306"  # Mapeando a porta do MariaDB para a máquina local
    environment:
      MYSQL_ROOT_PASSWORD: "${SENHA_ROOT_MYSQL}"  # Senha do root do MySQL
      MYSQL_DATABASE: "${BANCO_DE_DADOS_MYSQL}"  # Banco de dados a ser criado
      MYSQL_USER: "${MYSQL_USER}"  # Usuário MySQL
      MYSQL_PASSWORD: "${MYSQL_PASSWORD}"  # Senha do usuário MySQL
    volumes:
      - vol_mariadb:/var/lib/mysql:rw
    restart: always

  phpmyadmin:
    image: phpmyadmin/phpmyadmin:latest
    container_name: phpmyadmin
    environment:
      PMA_HOST: mariadb_apache
      PMA_PORT: 3306
    ports:
      - "8081:80"
    restart: always

volumes:
  vol_mariadb:
    # driver: local
